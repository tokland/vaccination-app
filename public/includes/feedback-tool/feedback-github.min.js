"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function e(t,n,r){function s(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return s(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,n){var r=function(){function e(t){_classCallCheck(this,e),this.options=t}return _createClass(e,[{key:"init",value:function(){$.feedback(Object.assign({},{postFunction:this._sendReport.bind(this)},this.options.feedbackOptions||{}))}},{key:"_setAuthHeader",value:function(e){e.setRequestHeader("Authorization","token "+this.options.token)}},{key:"_sendReport",value:function(e){var t=this,n=e.post.img.split(",")[1],r=(new Date).getTime()+parseInt(1e6*Math.random()).toString(),s=this.options.postFunction||function(){};return this._uploadFile("screenshot-"+r+".png",n).then(function(n){return t._getPayload(e,n)}).then(function(e){t.options.createIssue?t._postIssue(e).then(s):s(e)}).then(e.success,e.error)}},{key:"_uploadFile",value:function(e,t){var n={message:"feedback.js snapshot",branch:this.options.snapshots.branch,content:t};return $.ajax({url:"https://api.github.com/repos/"+this.options.snapshots.repository+"/contents/"+e,type:"PUT",beforeSend:this._setAuthHeader.bind(this),dataType:"json",data:JSON.stringify(n)}).then(function(e){return e.content.download_url})}},{key:"_getPayload",value:function(e,t){var n=e.post,r=n.browser,s=["## Browser","- Name: "+r.appCodeName,"- Version: "+r.appVersion,"- Platform: "+r.platform,"","## User report","URL: "+n.url,"",n.note,"","![See screenshot here]( "+t+" )"].join("\n");return{title:this.options.issues.renderTitle(n.title),body:this.options.issues.renderBody?this.options.issues.renderBody(s):s}}},{key:"_postIssue",value:function(e){return $.ajax({type:"POST",url:"https://api.github.com/repos/"+this.options.issues.repository+"/issues",beforeSend:this._setAuthHeader.bind(this),dataType:"json",data:JSON.stringify(e)}).then(function(t){return Object.assign(e,{issueURL:t.html_url})})}}]),e}();$.feedbackGithub=function(e){var t=new r(e);return t.init(),t}},{}]},{},[1]);